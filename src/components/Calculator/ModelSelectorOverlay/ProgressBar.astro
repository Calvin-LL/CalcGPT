---
import { colorLuminance } from "../../../helpers";

interface Props {
  id: string;
}

const lightProgressGradientColor = "#1E88E5";
const darkProgressGradientColor = "#1E88E5";

// light theme
const darkLightProgressGradientColor = colorLuminance(
  lightProgressGradientColor,
  -0.1,
);
const lightLightProgressGradientColor = colorLuminance(
  lightProgressGradientColor,
  0.07,
);

// dark theme
const darkDarkProgressGradientColor = colorLuminance(
  darkProgressGradientColor,
  -0.1,
);
const lightDarkProgressGradientColor = colorLuminance(
  darkProgressGradientColor,
  0.5,
);

const { id } = Astro.props;
---

<progress id={id} value="0"></progress>

<style
  lang="scss"
  define:vars={{
    darkLightProgressGradientColor,
    lightLightProgressGradientColor,

    darkDarkProgressGradientColor,
    lightDarkProgressGradientColor,
  }}
>
  progress {
    --borderRadius: calc(var(--buttonSize) / 6);
    --lightProgressGradientColor: var(--lightLightProgressGradientColor);
    --darkProgressGradientColor: var(--darkLightProgressGradientColor);

    @media (prefers-color-scheme: dark) {
      --lightProgressGradientColor: var(--lightDarkProgressGradientColor);
      --darkProgressGradientColor: var(--darkDarkProgressGradientColor);
    }

    appearance: none;
    margin: 0;
    padding: 0;
    border: 0;

    height: calc(var(--buttonSize) / 3);
    width: 100%;
    border-radius: var(--borderRadius);
    overflow: hidden;

    @mixin bar {
      appearance: none;
      margin: 0;
      padding: 0;
      border: 0;

      border-radius: var(--borderRadius);

      background: transparent;
      box-shadow:
        inset var(--shadowOffset) var(--shadowOffset) var(--blurRadius)
          var(--darkShadowColor),
        inset calc(var(--shadowOffset) * -1) calc(var(--shadowOffset) * -1)
          var(--blurRadius) var(--lightShadowColor);
    }

    @mixin value {
      appearance: none;
      margin: 0;
      padding: 0;
      border: 0;

      border-radius: var(--borderRadius);

      background: linear-gradient(
        135deg,
        var(--lightProgressGradientColor),
        var(--darkProgressGradientColor)
      );
    }

    &::-webkit-progress-bar {
      @include bar;
    }

    @supports selector(::-moz-progress-bar) {
      @include bar;
    }

    &::-webkit-progress-value {
      @include value;
    }

    &::-moz-progress-bar {
      @include value;
    }
  }
</style>
